{"ast":null,"code":"// client/src/redux/authAction.js\nimport axios from 'axios';\nimport { login as loginAction, logout as logoutAction, withdrawal as withdrawalAction } from \"./slice/authSlice\";\nconst apiDeleteAccount = async token => {\n  console.log(\"token in apiDeleteAccount: \", token);\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  try {\n    const response = await axios.delete('/api/withdrawal', config);\n    console.log(\"response in apiDeleteAccount: \", response);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error message: \", error.message);\n    console.error(\"Error stack: \", error.stack);\n    throw error;\n  }\n};\nconst apiLogout = async token => {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  try {\n    const response = await axios.post('/api/logout', {}, config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nexport const login = (userRole, userId, token) => {\n  return {\n    type: loginAction.type,\n    payload: {\n      userRole,\n      userId,\n      token\n    }\n  };\n};\nexport const logout = () => async (dispatch, getState) => {\n  const {\n    token\n  } = getState().auth; // Redux state에서 token 가져오기\n\n  try {\n    // 서버에 로그아웃 요청\n    await apiLogout(token);\n    dispatch({\n      type: logoutAction.type\n    });\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const withdrawal = () => async (dispatch, getState) => {\n  const {\n    token\n  } = getState().auth;\n  console.log(\"token in withdrawal action: \", token);\n  try {\n    // 서버함수로 회원탈퇴\n    await apiDeleteAccount(token);\n    console.log(\"token in apiDeleteAccount: \", token);\n    dispatch({\n      type: withdrawalAction.type\n    });\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const setUserRole = newUserRole => {\n  return {\n    type: \"SET_USER_ROLE\",\n    payload: newUserRole\n  };\n};","map":{"version":3,"names":["axios","login","loginAction","logout","logoutAction","withdrawal","withdrawalAction","apiDeleteAccount","token","console","log","config","headers","Authorization","response","delete","data","error","message","stack","apiLogout","post","userRole","userId","type","payload","dispatch","getState","auth","setUserRole","newUserRole"],"sources":["/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/redux/authAction.js"],"sourcesContent":["// client/src/redux/authAction.js\nimport axios from 'axios';\nimport {\n  login as loginAction,\n  logout as logoutAction,\n  withdrawal as withdrawalAction,\n} from \"./slice/authSlice\";\n\nconst apiDeleteAccount = async(token) => {\n  console.log(\"token in apiDeleteAccount: \", token);\n\n  const config = {\n    headers: { Authorization: `Bearer ${token}`}\n  };\n\n  try {\n    const response = await axios.delete('/api/withdrawal', config);\n    console.log(\"response in apiDeleteAccount: \", response);\n\n    return response.data;\n  } catch (error) {\n    console.error(\"Error message: \", error.message);\n    console.error(\"Error stack: \", error.stack);\n    throw error;\n  }\n};\n\nconst apiLogout = async(token) => {\n  const config = {\n    headers: { Authorization: `Bearer ${token}`}\n  };\n  try {\n    const response = await axios.post('/api/logout',{},config);\n    return response.data;\n  }catch(error){\n    throw error;\n  }\n};\n\nexport const login = (userRole,userId,token) => { \n  return {\n    type: loginAction.type,\n    payload: { userRole,userId,token },\n  };\n};\n\nexport const logout = () => async (dispatch, getState) => {\n  const { token } = getState().auth; // Redux state에서 token 가져오기\n\ntry {\n  // 서버에 로그아웃 요청\n  await apiLogout(token);\n  dispatch({type: logoutAction.type});\n} catch (error) {\n  console.error(error);\n}\n};\n\nexport const withdrawal = () => async (dispatch, getState) => {\n  const { token } = getState().auth;\n  console.log(\"token in withdrawal action: \", token);\n\n  try {\n    // 서버함수로 회원탈퇴\n    await apiDeleteAccount(token);\n    console.log(\"token in apiDeleteAccount: \", token);\n\n    dispatch({type: withdrawalAction.type});\n  } catch(error){\n    console.error(error);\n  }\n}\n\nexport const setUserRole = (newUserRole) => {\n  return {\n    type: \"SET_USER_ROLE\",\n    payload: newUserRole,\n  };\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACEC,KAAK,IAAIC,WAAW,EACpBC,MAAM,IAAIC,YAAY,EACtBC,UAAU,IAAIC,gBAAgB,QACzB,mBAAmB;AAE1B,MAAMC,gBAAgB,GAAG,MAAMC,KAAK,IAAK;EACvCC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,KAAK,CAAC;EAEjD,MAAMG,MAAM,GAAG;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASL,KAAM;IAAC;EAC7C,CAAC;EAED,IAAI;IACF,MAAMM,QAAQ,GAAG,MAAMd,KAAK,CAACe,MAAM,CAAC,iBAAiB,EAAEJ,MAAM,CAAC;IAC9DF,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEI,QAAQ,CAAC;IAEvD,OAAOA,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdR,OAAO,CAACQ,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAACC,OAAO,CAAC;IAC/CT,OAAO,CAACQ,KAAK,CAAC,eAAe,EAAEA,KAAK,CAACE,KAAK,CAAC;IAC3C,MAAMF,KAAK;EACb;AACF,CAAC;AAED,MAAMG,SAAS,GAAG,MAAMZ,KAAK,IAAK;EAChC,MAAMG,MAAM,GAAG;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASL,KAAM;IAAC;EAC7C,CAAC;EACD,IAAI;IACF,MAAMM,QAAQ,GAAG,MAAMd,KAAK,CAACqB,IAAI,CAAC,aAAa,EAAC,CAAC,CAAC,EAACV,MAAM,CAAC;IAC1D,OAAOG,QAAQ,CAACE,IAAI;EACtB,CAAC,QAAMC,KAAK,EAAC;IACX,MAAMA,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMhB,KAAK,GAAGA,CAACqB,QAAQ,EAACC,MAAM,EAACf,KAAK,KAAK;EAC9C,OAAO;IACLgB,IAAI,EAAEtB,WAAW,CAACsB,IAAI;IACtBC,OAAO,EAAE;MAAEH,QAAQ;MAACC,MAAM;MAACf;IAAM;EACnC,CAAC;AACH,CAAC;AAED,OAAO,MAAML,MAAM,GAAGA,CAAA,KAAM,OAAOuB,QAAQ,EAAEC,QAAQ,KAAK;EACxD,MAAM;IAAEnB;EAAM,CAAC,GAAGmB,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;;EAErC,IAAI;IACF;IACA,MAAMR,SAAS,CAACZ,KAAK,CAAC;IACtBkB,QAAQ,CAAC;MAACF,IAAI,EAAEpB,YAAY,CAACoB;IAAI,CAAC,CAAC;EACrC,CAAC,CAAC,OAAOP,KAAK,EAAE;IACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;EACtB;AACA,CAAC;AAED,OAAO,MAAMZ,UAAU,GAAGA,CAAA,KAAM,OAAOqB,QAAQ,EAAEC,QAAQ,KAAK;EAC5D,MAAM;IAAEnB;EAAM,CAAC,GAAGmB,QAAQ,CAAC,CAAC,CAACC,IAAI;EACjCnB,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEF,KAAK,CAAC;EAElD,IAAI;IACF;IACA,MAAMD,gBAAgB,CAACC,KAAK,CAAC;IAC7BC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,KAAK,CAAC;IAEjDkB,QAAQ,CAAC;MAACF,IAAI,EAAElB,gBAAgB,CAACkB;IAAI,CAAC,CAAC;EACzC,CAAC,CAAC,OAAMP,KAAK,EAAC;IACZR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;EACtB;AACF,CAAC;AAED,OAAO,MAAMY,WAAW,GAAIC,WAAW,IAAK;EAC1C,OAAO;IACLN,IAAI,EAAE,eAAe;IACrBC,OAAO,EAAEK;EACX,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}