{"ast":null,"code":"var _jsxFileName = \"/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/pages/Mypage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchUserLikes } from \"../redux/slice/likeSlice\";\nimport HotelCard from '../components/hotel/HotelCard';\nimport { HotelListContainer } from \"../components/pagestyles/HotelListStyles\";\nimport ChangePasswordForm from './ChangePasswordForm';\nimport { useNavigate } from \"react-router-dom\";\nimport { fetchMyHotels } from \"../redux/hotelActions\";\nimport IntroductionPage from './IntroductionPage';\nimport CheckHotelAdminProfile from './CheckHotelAdminProfile';\nimport HotelReservation from '../components/hotel/HotelReservation';\nimport { fetchUserComments } from '../redux/slice/commentSlice';\nimport CommentCard from '../components/hotel/comment/CommentCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Mypage() {\n  _s();\n  const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n  // console.log(\"loggedInUser\", loggedInUser);  //확인용\n  const userComments = useSelector(state => state.comment.comments['user']); // 사용자 댓글\n  const myHotels = useSelector(state => state.hotels.myHotels);\n  const [userRole, setUserRole] = useState(\"\");\n  useEffect(() => {\n    if (loggedInUser) {\n      const newUserRole = loggedInUser.userRole;\n      setUserRole(newUserRole);\n    }\n  }, [loggedInUser]);\n  const likes = useSelector(state => state.like.likes);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    dispatch(fetchUserLikes(loggedInUser.id));\n  }, []);\n  useEffect(() => {\n    if (loggedInUser !== null && loggedInUser !== void 0 && loggedInUser.id) {\n      dispatch(fetchMyHotels(loggedInUser.id));\n      dispatch(fetchUserComments({\n        user_id: loggedInUser.id\n      }));\n    }\n  }, [loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.id, dispatch]);\n  const myHotelList = Object.keys(myHotels).map(hotel_id => myHotels[hotel_id]);\n  const likeHotels = Object.keys(likes).map(hotel_id => likes[hotel_id]);\n  const handleEditButtonClick = hotel_id => {\n    console.log(\"Edit button clicked for hotel_id:\", hotel_id);\n    navigate(`/editHotel/${hotel_id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"My page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: userRole === 'hotel_admin' && /*#__PURE__*/_jsxDEV(IntroductionPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ChangePasswordForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(HotelReservation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HotelListContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uAD00\\uC2EC \\uD638\\uD154\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), likeHotels.map(hotel => /*#__PURE__*/_jsxDEV(HotelCard, {\n        hotel: hotel\n      }, hotel.hotel_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 37\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HotelListContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD638\\uD154\\uB9AC\\uC2A4\\uD2B8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 3\n      }, this), myHotelList.map(hotel => /*#__PURE__*/_jsxDEV(HotelCard, {\n        hotel: hotel,\n        showEditButton: userRole === 'hotel_admin',\n        onEditButtonClick: handleEditButtonClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\uD638\\uD154\\uB4F1\\uB85D\\uC790\\uD504\\uB85C\\uD544\\uD655\\uC778\", /*#__PURE__*/_jsxDEV(CheckHotelAdminProfile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uB098\\uC758 \\uD6C4\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), userComments ? userComments.map(comment => /*#__PURE__*/_jsxDEV(CommentCard, {\n        comment: comment\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true);\n}\n_s(Mypage, \"5SdwD29usNPhLESbiL4A3qUyyuY=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch, useNavigate];\n});\n_c = Mypage;\nvar _c;\n$RefreshReg$(_c, \"Mypage\");","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","fetchUserLikes","HotelCard","HotelListContainer","ChangePasswordForm","useNavigate","fetchMyHotels","IntroductionPage","CheckHotelAdminProfile","HotelReservation","fetchUserComments","CommentCard","jsxDEV","_jsxDEV","Fragment","_Fragment","Mypage","_s","loggedInUser","JSON","parse","localStorage","getItem","userComments","state","comment","comments","myHotels","hotels","userRole","setUserRole","newUserRole","likes","like","dispatch","navigate","id","user_id","myHotelList","Object","keys","map","hotel_id","likeHotels","handleEditButtonClick","console","log","children","fileName","_jsxFileName","lineNumber","columnNumber","hotel","showEditButton","onEditButtonClick","_c","$RefreshReg$"],"sources":["/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/pages/Mypage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchUserLikes } from \"../redux/slice/likeSlice\"; \nimport HotelCard from '../components/hotel/HotelCard';\nimport { HotelListContainer } from \"../components/pagestyles/HotelListStyles\";\nimport ChangePasswordForm from './ChangePasswordForm';\nimport { useNavigate } from \"react-router-dom\";\nimport { fetchMyHotels } from \"../redux/hotelActions\";\nimport IntroductionPage from './IntroductionPage';\nimport CheckHotelAdminProfile from './CheckHotelAdminProfile';\nimport HotelReservation from '../components/hotel/HotelReservation';\nimport { fetchUserComments } from '../redux/slice/commentSlice';\nimport CommentCard from '../components/hotel/comment/CommentCard';\n\nexport default function Mypage() {\n\n  const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n  // console.log(\"loggedInUser\", loggedInUser);  //확인용\n  const userComments = useSelector(state => state.comment.comments['user']); // 사용자 댓글\n  const myHotels = useSelector((state) => state.hotels.myHotels);\n  const [userRole, setUserRole] = useState(\"\");\n\n  useEffect(() => {\n    if (loggedInUser) {\n      const newUserRole = loggedInUser.userRole;\n      setUserRole(newUserRole);\n    }\n  }, [loggedInUser,]);\n\n  const likes = useSelector((state) => state.like.likes);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  useEffect(()=>{\n    dispatch(fetchUserLikes(loggedInUser.id));\n},[]);\n\n\n  useEffect(() => {\n    if (loggedInUser?.id) {\n      dispatch(fetchMyHotels(loggedInUser.id));\n      dispatch(fetchUserComments({user_id:loggedInUser.id}));\n    }\n  }, [loggedInUser?.id, dispatch]);\n\n  const myHotelList = Object.keys(myHotels).map((hotel_id) => myHotels[hotel_id]);\n  const likeHotels = Object.keys(likes).map((hotel_id) => likes[hotel_id]);\n\n  const handleEditButtonClick = (hotel_id) => {\n    console.log(\"Edit button clicked for hotel_id:\", hotel_id);\n    navigate(`/editHotel/${hotel_id}`);\n\n  };\n    return (\n      <>\n        <h1>My page</h1>\n\n        <div>\n          {userRole === 'hotel_admin' && <IntroductionPage/ >}\n        </div>\n        <div>\n          <h2>비밀번호 변경</h2>\n          <ChangePasswordForm />\n        </div>\n        <div>\n        <HotelReservation/>\n\n        </div>\n        <HotelListContainer>\n        <h2>관심 호텔</h2>\n          {likeHotels.map((hotel)=> <HotelCard key={hotel.hotel_id} hotel={hotel}/>)}\n        </HotelListContainer>\n\n\n<HotelListContainer>\n  <h2>호텔리스트</h2>\n  {myHotelList.map((hotel) => (\n    <HotelCard\n      hotel={hotel}\n      showEditButton={userRole === 'hotel_admin'}\n      onEditButtonClick={handleEditButtonClick}\n    />\n  ))}\n<div>호텔등록자프로필확인<CheckHotelAdminProfile/></div>\n  \n</HotelListContainer>\n\n<div>\n          <h2>나의 후기</h2>\n          {userComments ? userComments.map((comment) => (\n            <CommentCard key={comment.id} comment={comment} />\n          )) : <p>Loading...</p>}\n        </div>\n      </>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}