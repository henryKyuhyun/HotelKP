{"ast":null,"code":"var _jsxFileName = \"/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/pages/IntroductionPage.jsx\",\n  _s = $RefreshSig$();\n// client/src/pages/IntroductionPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function IntroductionPage() {\n  _s();\n  const [photo, setPhoto] = useState(null);\n  const [introText, setIntroText] = useState('');\n  const [error, setError] = useState('');\n  const token = useSelector(state => state.auth.token);\n  console.log(\"Current token:\", token);\n  axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n  const userRole = useSelector(state => state.auth.userRole);\n  useEffect(() => {\n    console.log(\"Current token:\", token);\n  }, [token]);\n  useEffect(() => {\n    console.log(\"Current user role:\", userRole);\n  }, [userRole]);\n  const handlePhotoChange = e => {\n    setPhoto(e.target.files[0]);\n  };\n  const handleIntroTextChange = e => {\n    setIntroText(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Token at the time of request:\", token);\n    try {\n      // FormData 객체\n      const formData = new FormData();\n      formData.append('photo', photo);\n      formData.append('introText', introText);\n\n      // 업로드서버에\n      await axios.post('http://localhost:4000/api/myprofile', formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.message) {\n        setError(error.response.data.message);\n      } else {\n        setError('서버오류발생');\n      }\n      console.error(error);\n    }\n    ;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uC790\\uAE30\\uC18C\\uAC1C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"photo\",\n          children: \"\\uC0AC\\uC9C4:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"photo\",\n          onChange: handlePhotoChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"intro-text\",\n          children: \"\\uC18C\\uAC1C\\uAE00:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"intro-text\",\n          value: introText,\n          onChange: handleIntroTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\uC800\\uC7A5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(IntroductionPage, \"Nm6yDT8iP7vdsckVNgld9wmuoUc=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = IntroductionPage;\nvar _c;\n$RefreshReg$(_c, \"IntroductionPage\");","map":{"version":3,"names":["React","useEffect","useState","useSelector","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","IntroductionPage","_s","photo","setPhoto","introText","setIntroText","error","setError","token","state","auth","console","log","defaults","headers","common","userRole","handlePhotoChange","e","target","files","handleIntroTextChange","value","handleSubmit","preventDefault","formData","FormData","append","post","Authorization","response","data","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","_c","$RefreshReg$"],"sources":["/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/pages/IntroductionPage.jsx"],"sourcesContent":["// client/src/pages/IntroductionPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\n\nexport default function IntroductionPage(){\n  const [photo, setPhoto] = useState(null);\n  const [introText, setIntroText] = useState('');\n  const [error, setError] = useState('');\n  const token = useSelector(state => state.auth.token);\n  console.log(\"Current token:\", token);\n  axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n  const userRole = useSelector((state) => state.auth.userRole);\n\n  useEffect(() => {\n    console.log(\"Current token:\", token);\n  }, [token]);\n\n  useEffect(() => {\n    console.log(\"Current user role:\", userRole);\n  }, [userRole]);\n\n\n  const handlePhotoChange = (e) =>{\n    setPhoto(e.target.files[0]);\n  };\n  \n\n  const handleIntroTextChange=(e)=>{\n    setIntroText(e.target.value);\n  };\n\n  const handleSubmit = async (e)=>{\n    e.preventDefault();\n    console.log(\"Token at the time of request:\", token);\n\n    try{\n      // FormData 객체\n      const formData = new FormData();\n      formData.append('photo',photo);\n      formData.append('introText', introText);\n\n      // 업로드서버에\n      await axios.post('http://localhost:4000/api/myprofile', formData,{\n        headers:{\n          Authorization: `Bearer ${token}`,\n          'Content-Type':'multipart/form-data',\n        }\n      });      \n    }catch(error){\n      if (error.response && error.response.data && error.response.data.message) {\n        setError(error.response.data.message);\n      }else{\n        setError('서버오류발생')\n      }\n      console.error(error);\n\n  };\n};\n\nreturn (\n  <>\n    <h2>자기소개</h2>\n    \n    {error && <p>{error}</p>}\n\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"photo\">사진:</label>\n        <input type=\"file\" id=\"photo\" onChange={handlePhotoChange} />\n      </div>\n      <div>\n        <label htmlFor=\"intro-text\">소개글:</label>\n        <textarea id=\"intro-text\" value={introText} onChange={handleIntroTextChange} />\n      </div>\n      <button type=\"submit\">저장</button>\n    </form>\n  </>\n);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}