{"ast":null,"code":"// client/src/redux/authAction.js\nimport axios from 'axios';\nimport { login as loginAction, logout as logoutAction, withdrawal as withdrawalAction } from \"./slice/authSlice\";\nconst apiDeleteAccount = async token => {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  try {\n    const response = await axios.delete('/api/withdrawal', config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nconst apiLogout = async token => {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  try {\n    const response = await axios.post('/logout', {}, config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nexport const login = (userRole, userId, token) => {\n  return {\n    type: loginAction.type,\n    payload: {\n      userRole,\n      userId,\n      token\n    }\n  };\n};\nexport const logout = () => async (dispatch, getState) => {\n  const {\n    token\n  } = getState().auth; // Redux state에서 token 가져오기\n\n  //   return {\n  //     type: logoutAction.type,\n  //   };\n  // };\n  try {\n    // 서버에 로그아웃 요청\n    await apiLogout(token);\n    dispatch({\n      type: logoutAction.type\n    });\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const withdrawal = () => async (dispatch, getState) => {\n  const {\n    token\n  } = getState().auth; // Redux state에서 token 가져오기\n  try {\n    // 서버함수로 회원탈퇴\n    await apiDeleteAccount(token);\n    dispatchEvent({\n      type: withdrawalAction.type\n    });\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const setUserRole = newUserRole => {\n  return {\n    type: \"SET_USER_ROLE\",\n    payload: newUserRole\n  };\n};","map":{"version":3,"names":["axios","login","loginAction","logout","logoutAction","withdrawal","withdrawalAction","apiDeleteAccount","token","config","headers","Authorization","response","delete","data","error","apiLogout","post","userRole","userId","type","payload","dispatch","getState","auth","console","dispatchEvent","setUserRole","newUserRole"],"sources":["/Users/kyuhyunpark/Desktop/HotelByKaaPaaa/HotelKP/client/src/redux/authAction.js"],"sourcesContent":["// client/src/redux/authAction.js\nimport axios from 'axios';\nimport {\n  login as loginAction,\n  logout as logoutAction,\n  withdrawal as withdrawalAction,\n} from \"./slice/authSlice\";\n\nconst apiDeleteAccount = async(token) => {\n  const config = {\n    headers: { Authorization: `Bearer ${token}`}\n  };\n\n  try {\n    const response = await axios.delete('/api/withdrawal', config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\nconst apiLogout = async(token) => {\n  const config = {\n    headers: { Authorization: `Bearer ${token}`}\n  };\n  try {\n    const response = await axios.post('/logout',{},config);\n    return response.data;\n  }catch(error){\n    throw error;\n  }\n};\n\nexport const login = (userRole,userId,token) => { \n  return {\n    type: loginAction.type,\n    payload: { userRole,userId,token },\n  };\n};\n\nexport const logout = () => async (dispatch, getState) => {\n  const { token } = getState().auth; // Redux state에서 token 가져오기\n\n//   return {\n//     type: logoutAction.type,\n//   };\n// };\ntry {\n  // 서버에 로그아웃 요청\n  await apiLogout(token);\n  dispatch({type: logoutAction.type});\n} catch (error) {\n  console.error(error);\n}\n};\n\nexport const withdrawal = () => async (dispatch, getState) => {\n  const { token } = getState().auth; // Redux state에서 token 가져오기\n  try {\n    // 서버함수로 회원탈퇴\n    await apiDeleteAccount(token);\n    dispatchEvent({type: withdrawalAction.type});\n  } catch(error){\n    console.error(error);\n  }\n}\n\nexport const setUserRole = (newUserRole) => {\n  return {\n    type: \"SET_USER_ROLE\",\n    payload: newUserRole,\n  };\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACEC,KAAK,IAAIC,WAAW,EACpBC,MAAM,IAAIC,YAAY,EACtBC,UAAU,IAAIC,gBAAgB,QACzB,mBAAmB;AAE1B,MAAMC,gBAAgB,GAAG,MAAMC,KAAK,IAAK;EACvC,MAAMC,MAAM,GAAG;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASH,KAAM;IAAC;EAC7C,CAAC;EAED,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMZ,KAAK,CAACa,MAAM,CAAC,iBAAiB,EAAEJ,MAAM,CAAC;IAC9D,OAAOG,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAMC,SAAS,GAAG,MAAMR,KAAK,IAAK;EAChC,MAAMC,MAAM,GAAG;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASH,KAAM;IAAC;EAC7C,CAAC;EACD,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMZ,KAAK,CAACiB,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC,EAACR,MAAM,CAAC;IACtD,OAAOG,QAAQ,CAACE,IAAI;EACtB,CAAC,QAAMC,KAAK,EAAC;IACX,MAAMA,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMd,KAAK,GAAGA,CAACiB,QAAQ,EAACC,MAAM,EAACX,KAAK,KAAK;EAC9C,OAAO;IACLY,IAAI,EAAElB,WAAW,CAACkB,IAAI;IACtBC,OAAO,EAAE;MAAEH,QAAQ;MAACC,MAAM;MAACX;IAAM;EACnC,CAAC;AACH,CAAC;AAED,OAAO,MAAML,MAAM,GAAGA,CAAA,KAAM,OAAOmB,QAAQ,EAAEC,QAAQ,KAAK;EACxD,MAAM;IAAEf;EAAM,CAAC,GAAGe,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;;EAErC;EACA;EACA;EACA;EACA,IAAI;IACF;IACA,MAAMR,SAAS,CAACR,KAAK,CAAC;IACtBc,QAAQ,CAAC;MAACF,IAAI,EAAEhB,YAAY,CAACgB;IAAI,CAAC,CAAC;EACrC,CAAC,CAAC,OAAOL,KAAK,EAAE;IACdU,OAAO,CAACV,KAAK,CAACA,KAAK,CAAC;EACtB;AACA,CAAC;AAED,OAAO,MAAMV,UAAU,GAAGA,CAAA,KAAM,OAAOiB,QAAQ,EAAEC,QAAQ,KAAK;EAC5D,MAAM;IAAEf;EAAM,CAAC,GAAGe,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;EACnC,IAAI;IACF;IACA,MAAMjB,gBAAgB,CAACC,KAAK,CAAC;IAC7BkB,aAAa,CAAC;MAACN,IAAI,EAAEd,gBAAgB,CAACc;IAAI,CAAC,CAAC;EAC9C,CAAC,CAAC,OAAML,KAAK,EAAC;IACZU,OAAO,CAACV,KAAK,CAACA,KAAK,CAAC;EACtB;AACF,CAAC;AAED,OAAO,MAAMY,WAAW,GAAIC,WAAW,IAAK;EAC1C,OAAO;IACLR,IAAI,EAAE,eAAe;IACrBC,OAAO,EAAEO;EACX,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}